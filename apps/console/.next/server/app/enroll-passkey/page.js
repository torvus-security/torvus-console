(()=>{var e={};e.id=965,e.ids=[965],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},852:e=>{"use strict";e.exports=require("async_hooks")},4300:e=>{"use strict";e.exports=require("buffer")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},4577:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},3460:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=r(6661),s=r(4749),n=r(6933),i=r.n(n),o=r(1769),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["enroll-passkey",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6186)),"/Users/haydenfarquhar/Projects/torvus-console/apps/console/app/enroll-passkey/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6086)),"/Users/haydenfarquhar/Projects/torvus-console/apps/console/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,8271,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/haydenfarquhar/Projects/torvus-console/apps/console/app/enroll-passkey/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/enroll-passkey/page",pathname:"/enroll-passkey",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2481:(e,t,r)=>{let a={"93ffb9b88426744d8c94e9c476682aa586178ef7":()=>Promise.resolve().then(r.bind(r,2956)).then(e=>e.completeEnrollmentAction)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"93ffb9b88426744d8c94e9c476682aa586178ef7":s.bind(null,"93ffb9b88426744d8c94e9c476682aa586178ef7")}},945:(e,t,r)=>{Promise.resolve().then(r.bind(r,2338))},966:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,7868,23))},4113:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,1387,23)),Promise.resolve().then(r.t.bind(r,8739,23)),Promise.resolve().then(r.t.bind(r,3285,23)),Promise.resolve().then(r.t.bind(r,6753,23)),Promise.resolve().then(r.t.bind(r,1722,23)),Promise.resolve().then(r.t.bind(r,320,23))},2338:(e,t,r)=>{"use strict";r.d(t,{EnrollmentForm:()=>i});var a=r(9593),s=r(480);let n={ok:!1,message:"Begin passkey enrollment to unlock Torvus Console."};function i({action:e}){let[t,r,i]=(0,s.useActionState)(e,n);return(0,a.jsxs)("section",{className:"panel","aria-labelledby":"enroll-heading",children:[(0,a.jsxs)("div",{className:"panel__header",children:[a.jsx("h2",{id:"enroll-heading",children:"Enroll passkey"}),a.jsx("span",{className:"tag subtle",children:"Required"})]}),(0,a.jsxs)("form",{action:r,className:"enroll-form",children:[a.jsx("p",{children:"Torvus requires platform staff to enroll a platform-managed passkey. Confirm possession of your FIDO2 key and follow the prompts. TOTP fallback is only permitted when the security admin toggles the override flag."}),(0,a.jsxs)("label",{className:"checkbox",children:[a.jsx("input",{type:"checkbox",name:"acknowledged",required:!0,disabled:i}),a.jsx("span",{children:"I understand this enrollment is mandatory and agree to audit logging."})]}),(0,a.jsxs)("label",{className:"checkbox",children:[a.jsx("input",{type:"checkbox",name:"requestTotp",disabled:i}),a.jsx("span",{children:"Request TOTP fallback (requires security_admin approval)."})]}),a.jsx("button",{type:"submit",className:"button primary",disabled:i,children:i?"Enrolling…":"Begin enrollment"})]}),(0,a.jsxs)("div",{className:t.ok?"enroll-result success":"enroll-result",role:"status",children:[a.jsx("strong",{children:t.ok?"Enrollment complete":"Action required"}),a.jsx("p",{children:t.message})]})]})}},2956:(e,t,r)=>{"use strict";r.r(t),r.d(t,{completeEnrollmentAction:()=>u});var a=r(482);r(7929);var s=r(5065),n=r(3680),i=r(3199),o=r(1682),l=r(9584),c=r(2477);let d=n.Ry({acknowledged:n.Z_().optional(),requestTotp:n.Z_().optional()});async function u(e,t){let r=await (0,i.vT)(),a=d.safeParse(Object.fromEntries(t.entries()));if(!a.success||!a.data.acknowledged)return{ok:!1,message:"You must acknowledge the enrollment policy before continuing."};let n=(0,o.i_)(),{error:c}=await n.from("staff_users").update({passkey_enrolled:!0}).eq("user_id",r.id);return c?(console.error("Failed to mark passkey enrollment",c),{ok:!1,message:"Enrollment update failed. Contact Security Engineering."}):(a.data.requestTotp&&console.info("TOTP fallback requested",{userId:r.id,email:r.email,correlationId:crypto.randomUUID()}),(0,l.C4)().capture("staff_console_viewed",{path:"/enroll-passkey/complete",user:r.analyticsId,env:"production"}),(0,s.revalidatePath)("/"),(0,s.revalidatePath)("/overview"),{ok:!0,message:"Passkey enrollment recorded. Continue into the Console to proceed."})}(0,c.h)([u]),(0,a.j)("93ffb9b88426744d8c94e9c476682aa586178ef7",u)},6186:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(36),s=r(7416),n=r(1928),i=r(3199);let o=(0,r(89).createProxy)(String.raw`/Users/haydenfarquhar/Projects/torvus-console/apps/console/app/enroll-passkey/enrollment-form.tsx#EnrollmentForm`);var l=r(2956);async function c(){let e=await (0,i.Ot)();e||(0,n.redirect)("/"),e.passkeyEnrolled&&(0,n.redirect)("/overview");let t=(0,s.headers)().get("x-correlation-id")??crypto.randomUUID();return(0,a.jsxs)("div",{className:"page",children:[(0,a.jsxs)("header",{className:"panel","aria-labelledby":"passkey-heading",children:[(0,a.jsxs)("div",{className:"panel__header",children:[a.jsx("h1",{id:"passkey-heading",children:"Passkey enrollment required"}),a.jsx("span",{className:"tag danger",children:"Blocker"})]}),a.jsx("p",{children:"Torvus enforces passkeys for all privileged staff. This enrollment gates access to production controls and is audited against the correlation ID below. Complete the steps to continue."}),(0,a.jsxs)("dl",{className:"kv",children:[(0,a.jsxs)("div",{children:[a.jsx("dt",{children:"Staff member"}),(0,a.jsxs)("dd",{children:[e.displayName," (",e.email,")"]})]}),(0,a.jsxs)("div",{children:[a.jsx("dt",{children:"Correlation ID"}),a.jsx("dd",{children:t})]})]}),a.jsx("p",{className:"muted",children:"TODO: Integrate WebAuthn ceremony via Supabase Auth once the security hardening review signs off. Until then, this stub flips the enrolled flag for developer testing only."})]}),a.jsx(o,{action:l.completeEnrollmentAction})]})}},6086:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>u,runtime:()=>h});var a=r(36),s=r(2746),n=r(7416),i=r(1928),o=r(3613),l=r(4463);r(1425),r(5178);var c=r(3199),d=r(9584);let u={title:"Torvus Console",description:"Privileged Torvus staff portal with RBAC, dual-control, and audit evidence.",icons:[{rel:"icon",url:"/favicon.ico"}]},h="nodejs";async function p({children:e}){let t=(0,n.headers)(),r=t.get("x-pathname")??"/",u=t.get("x-csp-nonce")??"",h=t.get("x-correlation-id")??crypto.randomUUID(),p=r.startsWith("/enroll-passkey"),f=await (0,c.Ot)();if(!f)return a.jsx("html",{lang:"en","data-theme":"torvus-staff",children:a.jsx("body",{"data-correlation":h,className:"body-minimal",children:(0,a.jsxs)("main",{className:"unauthorised",children:[a.jsx("h1",{children:"Access denied"}),a.jsx("p",{children:"Torvus Console is restricted to enrolled staff. Contact Security Operations."})]})})});if(f.passkeyEnrolled||p||(0,i.redirect)("/enroll-passkey"),(0,d.C4)().capture("staff_console_viewed",{path:r,env:"production",user:f.analyticsId,correlation_id:h}),p)return a.jsx("html",{lang:"en","data-theme":"torvus-staff",children:a.jsx("body",{"data-correlation":h,className:"body-minimal",children:a.jsx(o.Suspense,{fallback:a.jsx("div",{className:"loading","data-testid":"loading"}),children:e})})});let m=(0,d.mL)(f.permissions);return a.jsx("html",{lang:"en","data-theme":"torvus-staff",children:(0,a.jsxs)("body",{"data-correlation":h,className:"layout-shell",children:[(0,a.jsxs)("aside",{className:"sidebar","aria-label":"Primary",children:[(0,a.jsxs)("div",{className:"sidebar__brand",children:[a.jsx("span",{className:"brand-mark","aria-hidden":!0,children:"⚡"}),a.jsx("span",{className:"brand-text",children:"Torvus Console"})]}),a.jsx("nav",{children:a.jsx("ul",{children:m.map(e=>a.jsx("li",{children:a.jsx(s.default,{href:e.href,className:(0,l.Z)("nav-link",{active:r===e.href||"/"!==e.href&&r.startsWith(e.href)}),children:e.label})},e.href))})}),(0,a.jsxs)("footer",{children:[a.jsx("span",{className:"staff-name",children:f.displayName}),a.jsx("span",{className:"staff-email",children:f.email})]})]}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsxs)("header",{className:"topbar",children:[a.jsx("div",{className:"breadcrumbs",children:"/"===r?"Overview":r.replace("/","").replace("-"," ")}),a.jsx("div",{className:"topbar__meta","data-nonce":u,children:a.jsx("span",{className:"tag",children:f.roles.join(", ")||"staff"})})]}),a.jsx("main",{className:"main","data-testid":"main-content",children:a.jsx(o.Suspense,{fallback:a.jsx("div",{className:"loading","data-testid":"loading"}),children:e})})]})]})})}},9584:(e,t,r)=>{"use strict";r.d(t,{Se:()=>l,mL:()=>c,C4:()=>o});let a=require("node:crypto"),s=[{href:"/overview",label:"Overview",permission:"metrics.view"},{href:"/audit-events",label:"Audit Events",permission:"audit.read"},{href:"/releases",label:"Releases",permission:"releases.simulate"}];class n{capture(e,t={}){let r={event:e,properties:{$lib:"torvus-console",env:"production",...t},uuid:(0,a.randomUUID)()};this.queue.push({event:e,payload:r.properties}),this.host&&this.key&&fetch(`${this.host}/capture/`,{method:"POST",headers:{Authorization:`Bearer ${this.key}`,"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(e=>{console.warn("Analytics capture failed",e)})}getQueue(){return[...this.queue]}constructor(){this.queue=[],this.host=process.env.NEXT_PUBLIC_POSTHOG_HOST,this.key=process.env.NEXT_PUBLIC_POSTHOG_KEY}}let i=null;function o(){return i||(i=new n),i}function l(e){let t=(0,a.createHash)("sha256");return t.update(e.trim().toLowerCase()),t.digest("hex")}function c(e){return s.filter(t=>!t.permission||e.includes(t.permission)).map(({href:e,label:t})=>({href:e,label:t}))}},3199:(e,t,r)=>{"use strict";r.d(t,{Ot:()=>l,vT:()=>c});var a=r(3613),s=r(1682),n=r(9584);class i extends Error{constructor(e,t=403){super(e),this.status=t,this.name="StaffAccessError"}}let o=(0,a.cache)(async()=>{let e=(0,s.jq)(),{data:t,error:r}=await e.auth.getUser();return r?(console.error("Failed to resolve session user",r),null):t.user?{id:t.user.id,email:t.user.email??"unknown@torvussecurity.com"}:null}),l=(0,a.cache)(async()=>{let e=await o();if(!e)return null;let t=(0,s.i_)(),{data:r,error:a}=await t.from("staff_users").select("user_id, email, display_name, passkey_enrolled").eq("user_id",e.id).maybeSingle();if(a)throw console.error("Error loading staff user",a),new i("Unable to load staff profile",503);if(!r)return null;let{data:l,error:c}=await t.from("staff_role_members").select("role_id").eq("user_id",e.id);if(c)throw console.error("Error loading staff roles",c),new i("Unable to load staff roles",503);let d=l?.map(e=>e.role_id)??[],u=[],h=new Set;if(d.length){let{data:e,error:r}=await t.from("staff_roles").select("id, name").in("id",d);if(r)throw console.error("Error loading staff role names",r),new i("Unable to resolve role names",503);u=e?.map(e=>e.name)??[];let{data:a,error:s}=await t.from("staff_role_permissions").select("permission_key, role_id").in("role_id",d);if(s)throw console.error("Error loading staff permissions",s),new i("Unable to load staff permissions",503);a?.forEach(e=>{h.add(e.permission_key)})}return{id:r.user_id,email:r.email,displayName:r.display_name,passkeyEnrolled:r.passkey_enrolled,roles:u,permissions:Array.from(h),analyticsId:(0,n.Se)(r.email)}});async function c(e){let t=await l();if(!t)throw new i("Staff membership required",403);if(e?.permission&&!t.permissions.includes(e.permission))throw new i(`Missing required permission: ${e.permission}`,403);return t}},1682:(e,t,r)=>{"use strict";r.d(t,{i_:()=>d,jq:()=>l});var a=r(5665),s=r(6663),n=r(7416);let i=["SUPABASE_URL","SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE"];function o(){for(let e of i)if(!process.env[e])throw Error(`Missing required environment variable ${e}`)}function l(){return o(),(0,s.createServerComponentClient)({cookies:n.cookies},{supabaseUrl:process.env.SUPABASE_URL,supabaseKey:process.env.SUPABASE_ANON_KEY})}let c=null;function d(){return o(),c||(c=(0,a.eI)(process.env.SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE,{auth:{autoRefreshToken:!1,persistSession:!1}})),c}},5065:(e,t,r)=>{let a={unstable_cache:r(681).A,revalidateTag:r(6792).revalidateTag,revalidatePath:r(6792).revalidatePath,unstable_noStore:r(1555).P};e.exports=a,t.unstable_cache=a.unstable_cache,t.revalidatePath=a.revalidatePath,t.revalidateTag=a.revalidateTag,t.unstable_noStore=a.unstable_noStore},4213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return s},extractInterceptionRouteInformation:function(){return i},isInterceptionRouteAppPath:function(){return n}});let a=r(7837),s=["(..)(..)","(.)","(..)","(...)"];function n(e){return void 0!==e.split("/").find(e=>s.find(t=>e.startsWith(t)))}function i(e){let t,r,n;for(let a of e.split("/"))if(r=s.find(e=>a.startsWith(e))){[t,n]=e.split(r,2);break}if(!t||!r||!n)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,a.normalizeAppPath)(t),r){case"(.)":n="/"===t?`/${n}`:t+"/"+n;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);n=t.split("/").slice(0,-1).concat(n).join("/");break;case"(...)":n="/"+n;break;case"(..)(..)":let i=t.split("/");if(i.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);n=i.slice(0,-2).concat(n).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:n}}},6792:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return l},revalidateTag:function(){return o}});let a=r(7198),s=r(122),n=r(4163),i=r(5869);function o(e){return c(e,`revalidateTag ${e}`)}function l(e,t){if(e.length>n.NEXT_CACHE_SOFT_TAG_MAX_LENGTH){console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${n.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);return}let r=`${n.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,s.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),c(r,`revalidatePath ${e}`)}function c(e,t){let r=i.staticGenerationAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Error(`Invariant: static generation store missing in ${t}`);if(r.isUnstableCacheCallback)throw Error(`Route ${r.route} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);(0,a.trackDynamicDataAccessed)(r,t),r.revalidatedTags||(r.revalidatedTags=[]),r.revalidatedTags.includes(e)||r.revalidatedTags.push(e),r.pathWasRevalidated=!0}},681:(e,t,r)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return c}});let a=r(4163),s=r(3914),n=r(5869),i=r(4580),o=0;async function l(e,t,r,s,n,i,o){await t.set(r,{kind:"FETCH",data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof n?a.CACHE_ONE_YEAR:n},{revalidate:n,fetchCache:!0,tags:s,fetchIdx:i,fetchUrl:o})}function c(e,t,r={}){if(0===r.revalidate)throw Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`);let a=r.tags?(0,s.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,s.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let d=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let c=n.staticGenerationAsyncStorage.getStore(),u=i.requestAsyncStorage.getStore(),h=(null==c?void 0:c.incrementalCache)||globalThis.__incrementalCache;if(!h)throw Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`);let p=(null==u?void 0:u.url.pathname)??(null==c?void 0:c.route)??"",f=new URLSearchParams((null==u?void 0:u.url.search)??""),m=[...f.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${f.get(e)}`).join("&"),v=`${d}-${JSON.stringify(t)}`,g=await h.fetchCacheKey(v),y=`unstable_cache ${p}${m.length?"?":""}${m} ${e.name?` ${e.name}`:g}`,b=(c?c.nextFetchId:o)??1;if(c){if(c.nextFetchId=b+1,"number"==typeof r.revalidate?"number"==typeof c.revalidate&&c.revalidate<r.revalidate||(c.revalidate=r.revalidate):!1===r.revalidate&&void 0===c.revalidate&&(c.revalidate=r.revalidate),c.tags)for(let e of a)c.tags.includes(e)||c.tags.push(e);else c.tags=a.slice();let i=(0,s.addImplicitTags)(c,u);if("force-no-store"!==c.fetchCache&&!c.isOnDemandRevalidate&&!h.isOnDemandRevalidate&&!c.isDraftMode){let s=await h.get(g,{kindHint:"fetch",revalidate:r.revalidate,tags:a,softTags:i,fetchIdx:b,fetchUrl:y});if(s&&s.value){if("FETCH"!==s.value.kind)console.error(`Invariant invalid cacheEntry returned for ${v}`);else{let i=void 0!==s.value.data.body?JSON.parse(s.value.data.body):void 0;return s.isStale&&(c.pendingRevalidates||(c.pendingRevalidates={}),c.pendingRevalidates[v]=n.staticGenerationAsyncStorage.run({...c,fetchCache:"force-no-store",isUnstableCacheCallback:!0},e,...t).then(e=>l(e,h,g,a,r.revalidate,b,y)).catch(e=>console.error(`revalidating cache with key: ${v}`,e))),i}}}let o=await n.staticGenerationAsyncStorage.run({...c,fetchCache:"force-no-store",isUnstableCacheCallback:!0},e,...t);return l(o,h,g,a,r.revalidate,b,y),o}{if(o+=1,!h.isOnDemandRevalidate){let e=c&&(0,s.addImplicitTags)(c,u),t=await h.get(g,{kindHint:"fetch",revalidate:r.revalidate,tags:a,fetchIdx:b,fetchUrl:y,softTags:e});if(t&&t.value){if("FETCH"!==t.value.kind)console.error(`Invariant invalid cacheEntry returned for ${v}`);else if(!t.isStale)return void 0!==t.value.data.body?JSON.parse(t.value.data.body):void 0}}let i=await n.staticGenerationAsyncStorage.run({fetchCache:"force-no-store",isUnstableCacheCallback:!0,route:"/",page:"/",isStaticGeneration:!1,prerenderState:null},e,...t);return l(i,h,g,a,r.revalidate,b,y),i}}}},1555:(e,t,r)=>{"use strict";Object.defineProperty(t,"P",{enumerable:!0,get:function(){return n}});let a=r(5869),s=r(7198);function n(){let e=a.staticGenerationAsyncStorage.getStore();return e?e.forceStatic?void 0:void(e.isUnstableNoStore=!0,(0,s.markCurrentScopeAsDynamic)(e,"unstable_noStore()")):void 0}},6397:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},7837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return n},normalizeRscURL:function(){return i}});let a=r(6397),s=r(4117);function n(e){return(0,a.ensureLeadingSlash)(e.split("/").reduce((e,t,r,a)=>!t||(0,s.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===a.length-1?e:e+"/"+t,""))}function i(e){return e.replace(/\.rsc($|\?)/,"$1")}},122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRoutes:function(){return a.getSortedRoutes},isDynamicRoute:function(){return s.isDynamicRoute}});let a=r(9169),s=r(653)},653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return n}});let a=r(4213),s=/\/\[[^/]+?\](?=\/|$)/;function n(e){return(0,a.isInterceptionRouteAppPath)(e)&&(e=(0,a.extractInterceptionRouteInformation)(e).interceptedRoute),s.test(e)}},9169:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSortedRoutes",{enumerable:!0,get:function(){return a}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,a){if(0===e.length){this.placeholder=!1;return}if(a)throw Error("Catch-all must be the last part of the URL.");let s=e[0];if(s.startsWith("[")&&s.endsWith("]")){let r=s.slice(1,-1),i=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),i=!0),r.startsWith("...")&&(r=r.substring(3),a=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function n(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===s.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(a){if(i){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');n(this.optionalRestSlugName,r),this.optionalRestSlugName=r,s="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');n(this.restSlugName,r),this.restSlugName=r,s="[...]"}}else{if(i)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');n(this.slugName,r),this.slugName=r,s="[]"}}this.children.has(s)||this.children.set(s,new r),this.children.get(s)._insert(e.slice(1),t,a)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function a(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}},4117:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return s},PAGE_SEGMENT_KEY:function(){return a},isGroupSegment:function(){return r}});let a="__PAGE__",s="__DEFAULT__"},5178:()=>{},1425:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[925,13,870,680,497],()=>r(3460));module.exports=a})();